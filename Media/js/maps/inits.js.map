{"version":3,"sources":["init.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"inits.js","sourcesContent":["/*\r\n    init.js v2.0\r\n    Wezom wTPL v4.0.0\r\n*/\r\nwindow.wHTML = (function($){\r\n\r\n    /* Приватные переменные */\r\n\r\n        var varSeoIframe = 'seoIframe',\r\n            varSeoTxt = 'seoTxt',\r\n            varSeoClone = 'cloneSeo',\r\n            varSeoDelay = 200;\r\n\r\n    /* Приватные функции */\r\n\r\n        /* проверка типа данных на объект */\r\n        var _isObject = function(data) {\r\n            var flag = (typeof data == 'object') && (data+'' != 'null');\r\n            return flag;\r\n        },\r\n\r\n        /* создание нового элемента элемента */\r\n        _crtEl = function(tag, classes, attrs, jq) {\r\n            var tagName = tag || 'div';\r\n            var element = document.createElement(tagName);\r\n            var jQueryElement = jq || true;\r\n            // если классы объявлены - добавляем\r\n            if (classes) {\r\n                var tagClasses = classes.split(' ');\r\n                for (var i = 0; i < tagClasses.length; i++) {\r\n                    element.classList.add(tagClasses[i]);\r\n                }\r\n            }\r\n            // если атрибуты объявлены - добавляем\r\n            if (_isObject(attrs)) {\r\n                for (var key in attrs) {\r\n                    var val = attrs[key];\r\n                    element[key] = val;\r\n                }\r\n            }\r\n            // возвращаем созданый елемент\r\n            if (jQueryElement) {\r\n                return $(element);\r\n            } else {\r\n                return element;\r\n            }\r\n        },\r\n\r\n        /* создаем iframe для сео текста */\r\n        _seoBuild = function(wrapper) {\r\n            var seoTimer;\r\n            // создаем iframe, который будет следить за resize'm окна\r\n            var iframe = _crtEl('iframe', false, {id: varSeoIframe, name: varSeoIframe});\r\n            iframe.css({\r\n                'position':'absolute',\r\n                'left':'0',\r\n                'top':'0',\r\n                'width':'100%',\r\n                'height':'100%',\r\n                'z-index':'-1'\r\n            });\r\n            // добавляем его в родитель сео текста\r\n            wrapper.prepend(iframe);\r\n            // \"прослушка\" ресайза\r\n            seoIframe.onresize = function() {\r\n                clearTimeout(seoTimer);\r\n                seoTimer = setTimeout(function() {\r\n                    wHTML.seoSet();\r\n                }, varSeoDelay);\r\n            };\r\n            // вызываем seoSet()\r\n            wHTML.seoSet();\r\n        };\r\n\r\n    /* Публичные методы */\r\n\r\n        function Methods(){}\r\n\r\n        Methods.prototype = {\r\n\r\n            /* установка cео текста на странице */\r\n            seoSet: function() {\r\n                if ($('#'+varSeoTxt).length) {\r\n                    var seoText = $('#'+varSeoTxt);\r\n                    var iframe = seoText.children('#'+varSeoIframe);\r\n                    if (iframe.length) {\r\n                        // если iframe сущствует устанавливаем на место сео текст\r\n                        var seoClone = $('#'+varSeoClone);\r\n                        if (seoClone.length) {\r\n                            // клонеру задаем высоту\r\n                            seoClone.height(seoText.outerHeight(true));\r\n                            // тексту задаем позицию\r\n                            seoText.css({\r\n                                top: seoClone.offset().top\r\n                            });\r\n                        } else {\r\n                            // клонера нету - бьем в колокола !!!\r\n                            console.error('\"'+varSeoClone+'\" - не найден!');\r\n                        }\r\n                    } else {\r\n                        // если iframe отсутствует, создаем его и устанавливаем на место сео текст\r\n                        _seoBuild(seoText);\r\n                    }\r\n                }\r\n            },\r\n\r\n            /* magnificPopup inline */\r\n            mfi: function() {\r\n                $('.mfi').magnificPopup({\r\n                    type: 'inline',\r\n                    closeBtnInside: true,\r\n                    removalDelay: 300,\r\n                    mainClass: 'zoom-in'\r\n                });\r\n            },\r\n\r\n            /* magnificPopup ajax */\r\n            mfiAjax: function() {\r\n                $('body').magnificPopup({\r\n                    delegate: '.mfiA',\r\n                    callbacks: {\r\n                        elementParse: function(item) {\r\n                            this.st.ajax.settings = {\r\n                                url: item.el.data('url'),\r\n                                type: 'POST',\r\n                                data: (typeof item.el.data('param') !== 'undefined') ? item.el.data('param') : ''\r\n                            };\r\n                        },\r\n                        ajaxContentAdded: function(el) {\r\n                            wHTML.validation();\r\n                        }\r\n                    },\r\n                    type: 'ajax',\r\n                    removalDelay: 300,\r\n                    mainClass: 'zoom-in'\r\n                });\r\n            },\r\n\r\n            /* оборачивание iframe и video для адаптации */\r\n            wTxtIFRAME: function() {\r\n                var list = $('.wTxt').find('iframe').add($('.wTxt').find('video'));\r\n                if (list.length) {\r\n                    // в цикле для каждого\r\n                    for (var i = 0; i < list.length; i++) {\r\n                        var element = list[i];\r\n                        var jqElement = $(element);\r\n                        // если имеет класс ignoreHolder, пропускаем\r\n                        if (jqElement.hasClass('ignoreHolder')) {\r\n                            continue;\r\n                        }\r\n                        if (typeof jqElement.data('wraped') === 'undefined') {\r\n                            // определяем соотношение сторон\r\n                            var ratio = parseFloat((+element.offsetHeight / +element.offsetWidth * 100).toFixed(2));\r\n                            if (isNaN(ratio)) {\r\n                                // страховка 16:9\r\n                                ratio = 56.25;\r\n                            }\r\n                            // назнчаем дату и обрачиваем блоком\r\n                            jqElement.data('wraped', true).wrap('<div class=\"iframeHolder ratio_' + ratio.toFixed(0) + '\" style=\"padding-top:'+ratio+'%;\"\"></div>');\r\n                        }\r\n                    }\r\n                    // фиксим сео текст\r\n                    this.seoSet();\r\n                }\r\n            }\r\n        };\r\n\r\n    /* Объявление wHTML и базовые свойства */\r\n\r\n    var wHTML = $.extend(true, Methods.prototype, {});\r\n\r\n    return wHTML;\r\n\r\n})(jQuery);\r\n\r\n\r\n\r\n\r\njQuery(document).ready(function($) {\r\n\r\n    // поддержка cssanimations\r\n    transitFlag = Modernizr.cssanimations;\r\n\r\n    // очитска localStorage\r\n    localStorage.clear();\r\n\r\n    // сео текст\r\n    wHTML.seoSet();\r\n\r\n    // magnificPopup inline\r\n    wHTML.mfi();\r\n\r\n    // magnificPopup ajax\r\n    wHTML.mfiAjax();\r\n\r\n    // валидация форм\r\n    wHTML.validation();\r\n\r\n    function anchor(item) {\r\n        var anchor = item.data('anchor');\r\n        var top = $('.js-'+anchor).offset().top;\r\n        $('body, html').stop().animate({\r\n            scrollTop: top - 90\r\n        }, 500);\r\n    }\r\n\r\n    $(window).scroll(function() {\r\n        ($(this).scrollTop() > 100) ? $('.wHeader').addClass('scroll') : $('.wHeader').removeClass('scroll');\r\n        if($(window).width() < 540) {\r\n            ($(this).scrollTop() > 50) ? $('.wHeaderFix').addClass('scroll') : $('.wHeaderFix').removeClass('scroll');\r\n        }\r\n        else {\r\n            ($(this).scrollTop() > 50) ? $('.wHeaderFix').removeClass('scroll') : $('.wHeaderFix').removeClass('scroll');\r\n        }\r\n    });\r\n\r\n    $('.js-anchor').on('click', function(){\r\n        anchor($(this));\r\n    });\r\n\r\n    $('.js-couter input').on('focus', function(){\r\n        $(this).val($(this).data('count'));\r\n    }).on('blur', function(){\r\n        if($(this).data('count') <= 1) {\r\n            $(this).data('count',1);\r\n        }\r\n        $(this).val($(this).data('count') + ' шт');\r\n    }).on('keyup', function(){\r\n        $(this).data('count',$(this).val());\r\n    });\r\n    $('.spiner').on('click', function(){\r\n        var counter = $(this).closest('.counter_block').find('.js-couter input');\r\n        var count = $(this).closest('.counter_block').find('.js-couter input').data('count');\r\n        if($(this).hasClass('js-plus')){\r\n            count = count + 1;\r\n            $(this).closest('.counter_block').find('.js-couter input').data('count', count);\r\n            counter.val(count + ' шт');\r\n        }\r\n        if($(this).hasClass('js-minus') && count > 1){\r\n            count = count - 1;\r\n            $(this).closest('.counter_block').find('.js-couter input').data('count', count);\r\n            counter.val(count + ' шт');\r\n        }\r\n    });\r\n\r\n    $(window).load(function() {\r\n        // оборачивание iframe и video для адаптации\r\n        wHTML.wTxtIFRAME();\r\n\r\n        ($(this).scrollTop() > 100) ? $('.wHeader').addClass('scroll') : $('.wHeader').removeClass('scroll');\r\n\r\n        if($(window).width() < 540) {\r\n            ($(this).scrollTop() > 50) ? $('.wHeaderFix').addClass('scroll') : $('.wHeaderFix').removeClass('scroll');\r\n        }\r\n        else {\r\n            ($(this).scrollTop() > 50) ? $('.wHeaderFix').removeClass('scroll') : $('.wHeaderFix').removeClass('scroll');\r\n        }\r\n\r\n        $('.js-inputmask').inputmask({\"mask\": \"+38 (099) 99 99 999\"});\r\n\r\n        $('.js-select2').each(function() {\r\n            $(this).select2({\r\n                minimumResultsForSearch: -1,\r\n                placeholder: ''\r\n            }); \r\n        });\r\n\r\n        var dateString = $('.js-timer').data('finish');\r\n        if(Modernizr.safari) {\r\n            dateString = dateString.replace(/-/g, '/');\r\n        }\r\n\r\n        var diff = new Date(dateString).getTime() - new Date().getTime();\r\n        var showtime = Math.floor(diff/1000);\r\n\r\n        var clock = $('.js-timer').FlipClock(new Date(dateString), {\r\n            countdown: true,\r\n            clockFace: 'DailyCounter',\r\n            language: 'ru-ru'\r\n        });\r\n        clock.setTime(showtime);\r\n        clock.start();\r\n\r\n        $('.reviews_slider').find('ul').carouFredSel({\r\n            responsive: true,\r\n            auto: false,\r\n            scroll: {\r\n                items: 1,\r\n                duration: 1000,\r\n                timeoutDuration: 3000,\r\n                fx: 'scroll'\r\n            },\r\n            pagination: {\r\n                container: $('.pagg')\r\n            },\r\n            swipe: true\r\n        }, {\r\n            transition: transitFlag\r\n        });\r\n\r\n    });\r\n\r\n});\r\n"],"sourceRoot":"/source/"}