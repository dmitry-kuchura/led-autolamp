{"version":3,"sources":["validation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"validation.js","sourcesContent":["/*\r\n    validation.js v2.0\r\n    Wezom wTPL v4.0.0\r\n*/\r\n\r\n(function($){\r\n\r\n    if (typeof wHTML === 'undefined') {\r\n        window.wHTML = {};\r\n    }\r\n\r\n    var ValidLang = wLocalize.Validate[wLang];\r\n    var MSGS = {};\r\n    for (var key in ValidLang) {\r\n        var val = ValidLang[key];\r\n        switch(key) {\r\n            case 'maxlength':\r\n            case 'maxlength_checker':\r\n            case 'maxlength_select':\r\n            case 'minlength':\r\n            case 'minlength_select':\r\n            case 'minlength_checker':\r\n            case 'rangelength':\r\n            case 'rangelength_checker':\r\n            case 'rangelength_select':\r\n            case 'rangelength_select':\r\n            case 'range':\r\n            case 'max':\r\n            case 'min':\r\n            case 'filetype':\r\n            case 'filesize':\r\n            case 'filesizeEach':\r\n            case 'pattern':\r\n                MSGS[key] = $.validator.format(val);\r\n                break;\r\n            default:\r\n                MSGS[key] = val;\r\n        }\r\n    }\r\n\r\n    $.extend($.validator.messages, MSGS);\r\n\r\n    wHTML.wInputDate = function() {\r\n        if (!Modernizr.touch) {\r\n            var dates = document.getElementsByClassName('wInputDate');\r\n            for (var i = 0; i < dates.length; i++) {\r\n                var el = dates[i];\r\n                if (el.type == 'date') {\r\n                    el.type = 'text';\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    wHTML.validation = function() {\r\n        this.wInputDate();\r\n        $('.wForm').each(function() {\r\n            var formValid = $(this);\r\n            var validator = $.data(this, \"validator\");\r\n            if (typeof validator === 'undefined') {\r\n                formValid.validate({\r\n                    showErrors: function(errorMap, errorList) {\r\n                        if (errorList.length) {\r\n                            var firstError = errorList.shift();\r\n                            var newErrorList = [];\r\n                            newErrorList.push(firstError);\r\n                            this.errorList = newErrorList;\r\n                        }\r\n                        this.defaultShowErrors();\r\n                    },\r\n                    invalidHandler: function(form, validator) {\r\n                        formValid\r\n                            .addClass('no_valid')\r\n                            .data('validator').focusInvalid();\r\n                    },\r\n                    submitHandler: function(form) {\r\n                        var formJQ = $(form);\r\n                        var preloader = false;\r\n                        if (formJQ.hasClass('wFormPreloader')) {\r\n                            preloader = formJQ;\r\n                        } else if (formJQ.hasClass('wSubmitPreloader')) {\r\n                            preloader = formJQ.find('.wSubmit');\r\n                        }\r\n                        formValid.removeClass('no_valid').addClass('success');\r\n                        if (form.tagName.toLowerCase() === 'form') {\r\n                            form.submit();\r\n                        } else {\r\n                            if (preloader) {\r\n                                wPreloader.show(preloader);\r\n                            }\r\n                            if( formJQ.data('ajax') ) {\r\n                                var data = new FormData();\r\n                                var name;\r\n                                var val;\r\n                                var type;\r\n                                formJQ.find('input,textarea,select').each(function(){\r\n                                    var thisJQ = $(this);\r\n                                    name = thisJQ.data('name');\r\n                                    val = this.value;\r\n                                    type = this.type;\r\n                                    if((type != 'checkbox' && name) || (type == 'checkbox' && this.checked && name)) {\r\n                                        if(type == 'file') {\r\n                                            data.append(name, $(this)[0].files[0]);\r\n                                        } else if(type == 'radio' && $(this).prop('checked')) {\r\n                                            data.append(name, val);\r\n                                        } else if(type != 'radio') {\r\n                                            data.append(name, val);\r\n                                        }\r\n                                    }\r\n                                });\r\n                                var request = new XMLHttpRequest();\r\n                                request.open(\"POST\", '/form/' + formJQ.data('ajax'));\r\n                                request.onreadystatechange = function() {\r\n                                    var status;\r\n                                    var resp;\r\n                                    if (request.readyState == 4) {\r\n                                        status = request.status;\r\n                                        resp = request.response;\r\n                                        resp = jQuery.parseJSON(resp);\r\n                                        if (status == 200) {\r\n                                            if( resp.success ) {\r\n                                                if (!resp.noclear) {\r\n                                                    formJQ.validReset();\r\n                                                }\r\n                                                if (resp.clear) {\r\n                                                    for(var i = 0; i < resp.clear.length; i++) {\r\n                                                        $('input[name=\"' + resp.clear[i] + '\"]').val('');\r\n                                                        $('textarea[name=\"' + resp.clear[i] + '\"]').val('');\r\n                                                    }\r\n                                                }\r\n                                                if (resp.insert && resp.insert.selector && resp.insert.html) {\r\n                                                    $(resp.insert.selector).html(resp.insert.html);\r\n                                                }\r\n                                                if ( resp.response ) {\r\n                                                    generate(resp.response, 'success', 3500);\r\n                                                }\r\n                                            } else {\r\n                                                if ( resp.response ) {\r\n                                                    generate(resp.response, 'warning', 3500);\r\n                                                }\r\n                                            }\r\n                                            if( resp.redirect ) {\r\n                                                if(window.location.href == resp.redirect) {\r\n                                                    window.location.reload();\r\n                                                } else {\r\n                                                    window.location.href = resp.redirect;\r\n                                                }\r\n                                            }\r\n                                        } else {\r\n                                            alert('Something went wrong,\\nbut HTML fine ;)');\r\n                                        }\r\n                                    }\r\n                                    if (preloader) {\r\n                                        wPreloader.hide(preloader);\r\n                                    }\r\n                                };\r\n                                request.send(data);\r\n                                return false;\r\n                            } else {\r\n                                console.warn('HTML => Форма отправлена');\r\n                                if (preloader) {\r\n                                    setTimeout(function() {\r\n                                        formJQ.validReset();\r\n                                        wPreloader.hide(preloader);\r\n                                    }, 1000);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                formValid.on('change', '.wFile', function(event) {\r\n                    formValid.wFileVal(this);\r\n                });\r\n\r\n                /* Без тега FORM */\r\n                formValid.on('click', '.wSubmit', function(event) {\r\n                    formValid.submit();\r\n                });\r\n\r\n                /* Сброс Без тега FORM */\r\n                formValid.on('click', '.wReset', function(event) {\r\n                    if (formValid.is('DIV')) {\r\n                        formValid.validReset();\r\n                        wHTML.wInputDate();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n})(jQuery);"],"sourceRoot":"/source/"}